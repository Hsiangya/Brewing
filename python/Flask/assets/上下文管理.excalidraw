{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "text",
      "version": 46,
      "versionNonce": 910696828,
      "isDeleted": false,
      "id": "UR2SOs28R36mqGxIKaQzQ",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1698.8553502374746,
      "y": 3013.507692184192,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 721.875,
      "height": 537.6,
      "seed": 985805409,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435472,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "    def __call__(self, environ: dict, start_response: t.Callable) -> t.Any:\n        return self.wsgi_app(environ, start_response)\n\n    def wsgi_app(self, environ: dict, start_response: t.Callable) -> t.Any:\n        ctx = self.request_context(environ)\n\n\n        error: t.Optional[BaseException] = None\n        try:\n            try:\n                ctx.push()\n                response = self.full_dispatch_request()\n            except Exception as e:\n                error = e\n                response = self.handle_exception(e)\n            except:  # noqa: B001\n                error = sys.exc_info()[1]\n                raise\n            return response(environ, start_response)\n        finally:\n            if \"werkzeug.debug.preserve_context\" in environ:\n                environ[\"werkzeug.debug.preserve_context\"](_cv_app.get())\n                environ[\"werkzeug.debug.preserve_context\"](_cv_request.get())\n\n            if error is not None and self.should_ignore_error(error):\n                error = None\n\n            ctx.pop(error)",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def __call__(self, environ: dict, start_response: t.Callable) -> t.Any:\n        return self.wsgi_app(environ, start_response)\n\n    def wsgi_app(self, environ: dict, start_response: t.Callable) -> t.Any:\n        ctx = self.request_context(environ)\n\n\n        error: t.Optional[BaseException] = None\n        try:\n            try:\n                ctx.push()\n                response = self.full_dispatch_request()\n            except Exception as e:\n                error = e\n                response = self.handle_exception(e)\n            except:  # noqa: B001\n                error = sys.exc_info()[1]\n                raise\n            return response(environ, start_response)\n        finally:\n            if \"werkzeug.debug.preserve_context\" in environ:\n                environ[\"werkzeug.debug.preserve_context\"](_cv_app.get())\n                environ[\"werkzeug.debug.preserve_context\"](_cv_request.get())\n\n            if error is not None and self.should_ignore_error(error):\n                error = None\n\n            ctx.pop(error)",
      "lineHeight": 1.2
    },
    {
      "type": "rectangle",
      "version": 172,
      "versionNonce": 1256309828,
      "isDeleted": false,
      "id": "s8udC4zSy_i6xEfliMca8",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1707.3023106866933,
      "y": 2980.3637140652954,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 744.6968841552732,
      "height": 596.212100982666,
      "seed": 1528104783,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1681142435472,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 119,
      "versionNonce": 540971516,
      "isDeleted": false,
      "id": "xmaURV-pd4cPoEcXzzFMU",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1734.764507036791,
      "y": 2992.598630752307,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 203,
      "height": 19.2,
      "seed": 667461569,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "请求进入执行__call__方法",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "请求进入执行__call__方法",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 218,
      "versionNonce": 1982372804,
      "isDeleted": false,
      "id": "BqWMoqgc9Ug2Bau2uF1WE",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1969.1584279352285,
      "y": 2993.0152719876587,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 468.375,
      "height": 19.2,
      "seed": 458623265,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "environ:浏览器发送的数据,用户请求的所有数据，原始数据信息",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "environ:浏览器发送的数据,用户请求的所有数据，原始数据信息",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 126,
      "versionNonce": 1393750652,
      "isDeleted": false,
      "id": "aedFLhWXFO4vDUT_026LB",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2107.5674702936267,
      "y": 3092.257692184192,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 204.625,
      "height": 19.2,
      "seed": 1508615759,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "封装到request_context中",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "封装到request_context中",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 300,
      "versionNonce": 1369998148,
      "isDeleted": false,
      "id": "uzcLIUy8Vkt8y_9m-Y-Yx",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1734.8401906305407,
      "y": 3106.6516130826294,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 590.625,
      "height": 38.4,
      "seed": 382504399,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "4kxlwPcY3UxgKFHUKMYIp",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "    def request_context(self, environ: dict) -> RequestContext:\n        return RequestContext(self, environ)",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def request_context(self, environ: dict) -> RequestContext:\n        return RequestContext(self, environ)",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 78,
      "versionNonce": 1569145596,
      "isDeleted": false,
      "id": "5UF0BsjnD49fl0tN3JJYJ",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1715.143211107836,
      "y": 2493.697130050403,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 825,
      "height": 441.59999999999997,
      "seed": 622410625,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "class RequestContext:\n    def __init__(\n        self,\n        app: \"Flask\",\n        environ: dict,\n        request: t.Optional[\"Request\"] = None,\n        session: t.Optional[\"SessionMixin\"] = None,\n    ) -> None:\n        self.app = app\n        if request is None:\n            request = app.request_class(environ)\n            request.json_module = app.json\n        self.request: Request = request\n        self.url_adapter = None\n        try:\n            self.url_adapter = app.create_url_adapter(self.request)\n        except HTTPException as e:\n            self.request.routing_exception = e\n        self.flashes: t.Optional[t.List[t.Tuple[str, str]]] = None\n        self.session: t.Optional[\"SessionMixin\"] = session\n        self._after_request_functions: t.List[ft.AfterRequestCallable] = []\n\n        self._cv_tokens: t.List[t.Tuple[contextvars.Token, t.Optional[AppContext]]] = []",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "class RequestContext:\n    def __init__(\n        self,\n        app: \"Flask\",\n        environ: dict,\n        request: t.Optional[\"Request\"] = None,\n        session: t.Optional[\"SessionMixin\"] = None,\n    ) -> None:\n        self.app = app\n        if request is None:\n            request = app.request_class(environ)\n            request.json_module = app.json\n        self.request: Request = request\n        self.url_adapter = None\n        try:\n            self.url_adapter = app.create_url_adapter(self.request)\n        except HTTPException as e:\n            self.request.routing_exception = e\n        self.flashes: t.Optional[t.List[t.Tuple[str, str]]] = None\n        self.session: t.Optional[\"SessionMixin\"] = session\n        self._after_request_functions: t.List[ft.AfterRequestCallable] = []\n\n        self._cv_tokens: t.List[t.Tuple[contextvars.Token, t.Optional[AppContext]]] = []",
      "lineHeight": 1.2
    },
    {
      "type": "rectangle",
      "version": 104,
      "versionNonce": 331315908,
      "isDeleted": false,
      "id": "tasbI7drfhDBkDJ8aI5aK",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1707.302291613207,
      "y": 2481.121332015735,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 840.9091567993162,
      "height": 478.03028106689453,
      "seed": 625554369,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 474,
      "versionNonce": 639468412,
      "isDeleted": false,
      "id": "hzF-qPtNECBmyQj6OU3Ow",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2582.1128918939685,
      "y": 2819.0380209348023,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 541.625,
      "height": 115.19999999999999,
      "seed": 1835051969,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "1. 封装request对象\n2. 找路由，做路由匹配（request.path）==>Map 得到endpoint\n3. 创建一个空session\n4. 打包，放在一起，request_context对象\n5. 创建app对象\n6. 先执行完before_first_request,before_request,再执行视图函数",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "1. 封装request对象\n2. 找路由，做路由匹配（request.path）==>Map 得到endpoint\n3. 创建一个空session\n4. 打包，放在一起，request_context对象\n5. 创建app对象\n6. 先执行完before_first_request,before_request,再执行视图函数",
      "lineHeight": 1.2
    },
    {
      "type": "arrow",
      "version": 249,
      "versionNonce": 1997242948,
      "isDeleted": false,
      "id": "4kxlwPcY3UxgKFHUKMYIp",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1753.514220934496,
      "y": 3100.0607508084595,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 42.424278259277344,
      "height": 564.2556305672815,
      "seed": 1823630351,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "uzcLIUy8Vkt8y_9m-Y-Yx",
        "focus": -0.8760119191164807,
        "gap": 6.5908622741696945
      },
      "endBinding": null,
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          -42.424278259277344,
          -100.75752258300781
        ],
        [
          -19.92272905641994,
          -564.2556305672815
        ]
      ]
    },
    {
      "type": "text",
      "version": 145,
      "versionNonce": 1930933244,
      "isDeleted": false,
      "id": "u9_iDUPCqCwQ1sVBTIVaf",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2216.8096425348376,
      "y": 2599.530584182483,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 151.125,
      "height": 19.2,
      "seed": 292354703,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "request默认为none",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "request默认为none",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 214,
      "versionNonce": 845846980,
      "isDeleted": false,
      "id": "lNS_JyRF4WZ_wR570IbQw",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1932.1732632928945,
      "y": 2557.0518610379513,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 107,
      "height": 19.2,
      "seed": 1074445473,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "self:app对象",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "self:app对象",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 128,
      "versionNonce": 1920455804,
      "isDeleted": false,
      "id": "wpjA2_FKW1UP-hivYRhDh",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2178.854968767748,
      "y": 2684.113981094104,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 215.625,
      "height": 19.2,
      "seed": 140579105,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "Njbi5D69Q5JZjFQvBIK3-",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "request_class = Request",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "request_class = Request",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 46,
      "versionNonce": 1895481668,
      "isDeleted": false,
      "id": "poCXicdYSWSC61HsT2XQZ",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1741.8853833490468,
      "y": 2205.5533808133423,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 628.125,
      "height": 249.6,
      "seed": 1154041071,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "class Request(_SansIORequest): \n    max_content_length: t.Optional[int] = None\n    max_form_memory_size: t.Optional[int] = None\n    max_form_parts = 1000\n    form_data_parser_class: t.Type[FormDataParser] = FormDataParser\n    environ: \"WSGIEnvironment\"\n    shallow: bool\n\n    def __init__(\n        self,\n        environ: \"WSGIEnvironment\",\n        populate_request: bool = True,\n        shallow: bool = False,",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "class Request(_SansIORequest): \n    max_content_length: t.Optional[int] = None\n    max_form_memory_size: t.Optional[int] = None\n    max_form_parts = 1000\n    form_data_parser_class: t.Type[FormDataParser] = FormDataParser\n    environ: \"WSGIEnvironment\"\n    shallow: bool\n\n    def __init__(\n        self,\n        environ: \"WSGIEnvironment\",\n        populate_request: bool = True,\n        shallow: bool = False,",
      "lineHeight": 1.2
    },
    {
      "type": "rectangle",
      "version": 107,
      "versionNonce": 1107289340,
      "isDeleted": false,
      "id": "Po2I-oHC546Gl9Ul1xT6u",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1708.0595853143789,
      "y": 2191.3488214871704,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 828.7879562377926,
      "height": 265.90904235839844,
      "seed": 69642241,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false
    },
    {
      "type": "arrow",
      "version": 70,
      "versionNonce": 1243216068,
      "isDeleted": false,
      "id": "Njbi5D69Q5JZjFQvBIK3-",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2395.1807477289294,
      "y": 2690.5911844632446,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 239.3939208984375,
      "height": 359.0908432006836,
      "seed": 1085023393,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "wpjA2_FKW1UP-hivYRhDh",
        "focus": 1.0064999787703803,
        "gap": 1
      },
      "endBinding": null,
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          0,
          -222.72724151611328
        ],
        [
          -239.3939208984375,
          -359.0908432006836
        ]
      ]
    },
    {
      "type": "text",
      "version": 108,
      "versionNonce": 1999758716,
      "isDeleted": false,
      "id": "JC7QtmtbHhQEUU_QuUy2l",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2087.9459454828357,
      "y": 2396.386701431018,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 128,
      "height": 19.2,
      "seed": 35141103,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "原始数据传递进来",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "原始数据传递进来",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 236,
      "versionNonce": 963002436,
      "isDeleted": false,
      "id": "lgZ7GmK5ow2VYY_zGFN7P",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2167.8322484308337,
      "y": 3129.6822183987915,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "width": 223.375,
      "height": 19.2,
      "seed": 542912079,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "ctx指代RequestContext对象",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "ctx指代RequestContext对象",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 111,
      "versionNonce": 659543548,
      "isDeleted": false,
      "id": "91Fj1QmquDCkG39BBRD0Y",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1981.5065457635976,
      "y": 2668.432180251819,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "width": 231.125,
      "height": 19.2,
      "seed": 730252065,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "ctx.request可以获取到该对象",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "ctx.request可以获取到该对象",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 124,
      "versionNonce": 381523908,
      "isDeleted": false,
      "id": "RBKGVr9eBZYF9R_Vih5sj",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2266.6201855951404,
      "y": 2859.720098342639,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "width": 129.625,
      "height": 19.2,
      "seed": 1767726145,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "默认session为空",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "默认session为空",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 275,
      "versionNonce": 1868281468,
      "isDeleted": false,
      "id": "T5jYbG-uXv7VAY0tqe3nW",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2042.7187611871814,
      "y": 3164.6442621609986,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "width": 393.875,
      "height": 57.599999999999994,
      "seed": 25096065,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "创建了一个RequstContext对象，内部封装了两个值：\nrequest = Request(environ)\nsession = None",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "创建了一个RequstContext对象，内部封装了两个值：\nrequest = Request(environ)\nsession = None",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 230,
      "versionNonce": 238944068,
      "isDeleted": false,
      "id": "sldAdGO1wB40RkRZv0lhM",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1924.4990613275625,
      "y": 3050.4018610379517,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "width": 358,
      "height": 19.2,
      "seed": 1461365935,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "ctx.request可以获取数据，.args可以获取参数",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "ctx.request可以获取数据，.args可以获取参数",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 31,
      "versionNonce": 2081916668,
      "isDeleted": false,
      "id": "tslLGyIqVc2zdJNgKi6C7",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1693.9688565546132,
      "y": 3619.8715418240845,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 759.375,
      "height": 364.8,
      "seed": 1941310401,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "hfwHjUxNJdHQ1Pc1d1Tov",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "    def push(self) -> None:\n\n        app_ctx = _cv_app.get(None)\n\n        if app_ctx is None or app_ctx.app is not self.app:\n            app_ctx = self.app.app_context()\n            app_ctx.push()\n        else:\n            app_ctx = None\n\n        self._cv_tokens.append((_cv_request.set(self), app_ctx))\n        if self.session is None:\n            session_interface = self.app.session_interface\n            self.session = session_interface.open_session(self.app, self.request)\n\n            if self.session is None:\n                self.session = session_interface.make_null_session(self.app)\n        if self.url_adapter is not None:\n            self.match_request()",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def push(self) -> None:\n\n        app_ctx = _cv_app.get(None)\n\n        if app_ctx is None or app_ctx.app is not self.app:\n            app_ctx = self.app.app_context()\n            app_ctx.push()\n        else:\n            app_ctx = None\n\n        self._cv_tokens.append((_cv_request.set(self), app_ctx))\n        if self.session is None:\n            session_interface = self.app.session_interface\n            self.session = session_interface.open_session(self.app, self.request)\n\n            if self.session is None:\n                self.session = session_interface.make_null_session(self.app)\n        if self.url_adapter is not None:\n            self.match_request()",
      "lineHeight": 1.2
    },
    {
      "type": "rectangle",
      "version": 88,
      "versionNonce": 407205572,
      "isDeleted": false,
      "id": "QWXYjdivtD-INxiNWESfY",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1706.5445401483632,
      "y": 3601.9547480008423,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 765.1515197753904,
      "height": 389.39388275146496,
      "seed": 1243849249,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false
    },
    {
      "type": "arrow",
      "version": 106,
      "versionNonce": 302335868,
      "isDeleted": false,
      "id": "hfwHjUxNJdHQ1Pc1d1Tov",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1840.6354977899648,
      "y": 3210.666887130481,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 109.09095764160156,
      "height": 395.4545021057129,
      "seed": 2039959105,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "startBinding": null,
      "endBinding": {
        "elementId": "tslLGyIqVc2zdJNgKi6C7",
        "focus": -0.7098833061119443,
        "gap": 13.750152587890852
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          -109.09095764160156,
          109.8484992980957
        ],
        [
          -75.17833676697069,
          395.4545021057129
        ]
      ]
    },
    {
      "type": "text",
      "version": 124,
      "versionNonce": 1903296068,
      "isDeleted": false,
      "id": "eKdmWO7-4LKhRTM5cVlYj",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1765.22723617294,
      "y": 3640.3091935642647,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 590.625,
      "height": 19.2,
      "seed": 945130497,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "_cv_app: ContextVar[\"AppContext\"] = ContextVar(\"flask.app_ctx\")",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "_cv_app: ContextVar[\"AppContext\"] = ContextVar(\"flask.app_ctx\")",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 132,
      "versionNonce": 359069692,
      "isDeleted": false,
      "id": "15NhrkZFbZxLuChh67m7l",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2038.8551404291247,
      "y": 3660.6669062039673,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 96,
      "height": 19.2,
      "seed": 911146863,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "一开始是空的",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "一开始是空的",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 164,
      "versionNonce": 312579524,
      "isDeleted": false,
      "id": "Te5QKiyerPLlChTp8lCmH",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2254.1581418329333,
      "y": 3696.197149123889,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 163.25,
      "height": 19.2,
      "seed": 329493089,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "self.app,指代flask",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "self.app,指代flask",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 70,
      "versionNonce": 306092156,
      "isDeleted": false,
      "id": "Dsm3YLBlt4WbNyN73tnTT",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2051.5445592218493,
      "y": 3742.9017847440064,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 375,
      "height": 38.4,
      "seed": 452127727,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "    def app_context(self) -> AppContext:\n        return AppContext(self)",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def app_context(self) -> AppContext:\n        return AppContext(self)",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 119,
      "versionNonce": 686964036,
      "isDeleted": false,
      "id": "Dk4m9eahrEkqLAEVDQ0D9",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2116.317260485277,
      "y": 3717.485105361682,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 189.75,
      "height": 19.2,
      "seed": 347317409,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "返回AppContext实例对象",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "返回AppContext实例对象",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 24,
      "versionNonce": 1145972988,
      "isDeleted": false,
      "id": "SzvjGbqBto0gh7EluH38Q",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1722.2263409906484,
      "y": 4024.568425979358,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 562.5,
      "height": 115.19999999999999,
      "seed": 251933057,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "class AppContext:\n    def __init__(self, app: \"Flask\") -> None:\n        self.app = app\n        self.url_adapter = app.create_url_adapter(None)\n        self.g: _AppCtxGlobals = app.app_ctx_globals_class()\n        self._cv_tokens: t.List[contextvars.Token] = []",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "class AppContext:\n    def __init__(self, app: \"Flask\") -> None:\n        self.app = app\n        self.url_adapter = app.create_url_adapter(None)\n        self.g: _AppCtxGlobals = app.app_ctx_globals_class()\n        self._cv_tokens: t.List[contextvars.Token] = []",
      "lineHeight": 1.2
    },
    {
      "type": "rectangle",
      "version": 82,
      "versionNonce": 230814916,
      "isDeleted": false,
      "id": "DV6bgZuXQw8DuTN-l1BIs",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1702.7566983514882,
      "y": 4008.015348281604,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 764.393844604492,
      "height": 156.0605239868164,
      "seed": 453384943,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "id": "Ox0sEoXUOKWFxkUxl_3XC",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 66,
      "versionNonce": 521644412,
      "isDeleted": false,
      "id": "S-xRvcUw-GJtfZxkOIGxp",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2291.3551785760974,
      "y": 4099.113790359241,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 73.375,
      "height": 19.2,
      "seed": 1112244399,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "g：空字典",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "g：空字典",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 455,
      "versionNonce": 1051638852,
      "isDeleted": false,
      "id": "2BKxDrULL8QI06QIU53Z8",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2329.2718961053943,
      "y": 3717.9396265408814,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 141.75,
      "height": 19.2,
      "seed": 635180161,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "创建了AppContext",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "创建了AppContext",
      "lineHeight": 1.2
    },
    {
      "type": "arrow",
      "version": 76,
      "versionNonce": 1440553468,
      "isDeleted": false,
      "id": "mx2lMcyO7w1SncnpEm7cy",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1797.4536206537343,
      "y": 3722.409231033069,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 74.24240112304688,
      "height": 303.03028106689453,
      "seed": 480715713,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "startBinding": null,
      "endBinding": {
        "elementId": "2hf7cUaPySEaibGt2OOrM",
        "focus": -1.1574971108327146,
        "gap": 12.992477416992188
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          -74.24240112304688,
          100
        ],
        [
          -43.181800842285156,
          303.03028106689453
        ]
      ]
    },
    {
      "type": "text",
      "version": 77,
      "versionNonce": 1435931588,
      "isDeleted": false,
      "id": "2hf7cUaPySEaibGt2OOrM",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1767.2642972284414,
      "y": 4010.7047098538696,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 153.375,
      "height": 19.2,
      "seed": 1027215631,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "mx2lMcyO7w1SncnpEm7cy",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "里面封装了一个g对象",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "里面封装了一个g对象",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 21,
      "versionNonce": 1671461500,
      "isDeleted": false,
      "id": "4PYgsO7eWSqJmFx8TDwPR",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1684.4232632928945,
      "y": 4197.18191322301,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 553.125,
      "height": 76.8,
      "seed": 409275311,
      "groupIds": [],
      "roundness": null,
      "boundElements": [
        {
          "id": "DpmddYwWqvMhuP59ToqsL",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "    def push(self) -> None:\n        \"\"\"Binds the app context to the current context.\"\"\"\n        self._cv_tokens.append(_cv_app.set(self))\n        appcontext_pushed.send(self.app)",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def push(self) -> None:\n        \"\"\"Binds the app context to the current context.\"\"\"\n        self._cv_tokens.append(_cv_app.set(self))\n        appcontext_pushed.send(self.app)",
      "lineHeight": 1.2
    },
    {
      "type": "rectangle",
      "version": 64,
      "versionNonce": 9927492,
      "isDeleted": false,
      "id": "NWN8bSyvkczmebsByYhs4",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1704.8609870884677,
      "y": 4182.25759681676,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 761.3636016845701,
      "height": 104.54544067382812,
      "seed": 1038822575,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false
    },
    {
      "type": "arrow",
      "version": 129,
      "versionNonce": 321112828,
      "isDeleted": false,
      "id": "DpmddYwWqvMhuP59ToqsL",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1795.9384610468007,
      "y": 3746.2727945706665,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 78.03031921386719,
      "height": 442.4241638183594,
      "seed": 882487471,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "startBinding": null,
      "endBinding": {
        "elementId": "4PYgsO7eWSqJmFx8TDwPR",
        "focus": -0.8790183761971081,
        "gap": 8.48495483398392
      },
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          -77.27275848388672,
          58.33332061767578
        ],
        [
          -78.03031921386719,
          442.4241638183594
        ]
      ]
    },
    {
      "type": "text",
      "version": 68,
      "versionNonce": 115936124,
      "isDeleted": false,
      "id": "zu8-4APHyZHxNoARPzuve",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2006.5068890863513,
      "y": 3835.249921645862,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 97.625,
      "height": 19.2,
      "seed": 1459871471,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "session赋值",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "session赋值",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 26,
      "versionNonce": 10254916,
      "isDeleted": false,
      "id": "0k3K0utpRn5rplPIDrU0p",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1668.51456425725,
      "y": 4322.33328041051,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 768.75,
      "height": 134.4,
      "seed": 865133473,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "    def match_request(self) -> None:\n        try:\n            result = self.url_adapter.match(return_rule=True)  # type: ignore\n\n            self.request.url_rule, self.request.view_args = result  # type: ignore\n        except HTTPException as e:\n            self.request.routing_exception = e",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def match_request(self) -> None:\n        try:\n            result = self.url_adapter.match(return_rule=True)  # type: ignore\n\n            self.request.url_rule, self.request.view_args = result  # type: ignore\n        except HTTPException as e:\n            self.request.routing_exception = e",
      "lineHeight": 1.2
    },
    {
      "type": "rectangle",
      "version": 87,
      "versionNonce": 1093811196,
      "isDeleted": false,
      "id": "XgO9jMq7odVuPHuOnBB7X",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1697.453887682543,
      "y": 4313.318120803577,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "width": 764.393844604492,
      "height": 160.60596466064453,
      "seed": 1255472737,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false
    },
    {
      "type": "arrow",
      "version": 111,
      "versionNonce": 1327272388,
      "isDeleted": false,
      "id": "Ox0sEoXUOKWFxkUxl_3XC",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1997.453887682543,
      "y": 3979.2271822354614,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 404.5453643798826,
      "height": 379.54545974731445,
      "seed": 1158379823,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "startBinding": {
        "elementId": "DV6bgZuXQw8DuTN-l1BIs",
        "focus": -0.6286476278816124,
        "gap": 28.788166046142578
      },
      "endBinding": null,
      "lastCommittedPoint": null,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [
        [
          0,
          0
        ],
        [
          382.5756835937498,
          67.42425918579102
        ],
        [
          404.5453643798826,
          379.54545974731445
        ]
      ]
    },
    {
      "type": "text",
      "version": 47,
      "versionNonce": 738286716,
      "isDeleted": false,
      "id": "8Ljal2WZcr0pahU-t_M4e",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2023.0599667841052,
      "y": 4321.916562881213,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 64,
      "height": 19.2,
      "seed": 1271779503,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "匹配路由",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "匹配路由",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 68,
      "versionNonce": 346929476,
      "isDeleted": false,
      "id": "fZw17uhej2xSsiSg1YEBx",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 1828.6281277948476,
      "y": 4378.621122207385,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 107,
      "height": 19.2,
      "seed": 1500677455,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "获取url_rule",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "获取url_rule",
      "lineHeight": 1.2
    },
    {
      "type": "text",
      "version": 62,
      "versionNonce": 555248892,
      "isDeleted": false,
      "id": "EhV7xBwu1GTqeMoaEU-XA",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 2091.279647570238,
      "y": 4380.098401870471,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "width": 80,
      "height": 19.2,
      "seed": 1315695055,
      "groupIds": [],
      "roundness": null,
      "boundElements": [],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 3,
      "text": "和请求参数",
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "和请求参数",
      "lineHeight": 1.2
    },
    {
      "id": "mlzkPqyVRdWtcDLOR8hmi",
      "type": "text",
      "x": 3421.597948453213,
      "y": 2200.89394426956,
      "width": 721.875,
      "height": 441.59999999999997,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1383666884,
      "version": 15,
      "versionNonce": 1823338692,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "    def wsgi_app(self, environ: dict, start_response: t.Callable) -> t.Any:\n        ctx = self.request_context(environ)\n        error: t.Optional[BaseException] = None\n        try:\n            try:\n                ctx.push()\n                response = self.full_dispatch_request()\n            except Exception as e:\n                error = e\n                response = self.handle_exception(e)\n            except:  # noqa: B001\n                error = sys.exc_info()[1]\n                raise\n            return response(environ, start_response)\n        finally:\n            if \"werkzeug.debug.preserve_context\" in environ:\n                environ[\"werkzeug.debug.preserve_context\"](_cv_app.get())\n                environ[\"werkzeug.debug.preserve_context\"](_cv_request.get())\n\n            if error is not None and self.should_ignore_error(error):\n                error = None\n\n            ctx.pop(error)",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def wsgi_app(self, environ: dict, start_response: t.Callable) -> t.Any:\n        ctx = self.request_context(environ)\n        error: t.Optional[BaseException] = None\n        try:\n            try:\n                ctx.push()\n                response = self.full_dispatch_request()\n            except Exception as e:\n                error = e\n                response = self.handle_exception(e)\n            except:  # noqa: B001\n                error = sys.exc_info()[1]\n                raise\n            return response(environ, start_response)\n        finally:\n            if \"werkzeug.debug.preserve_context\" in environ:\n                environ[\"werkzeug.debug.preserve_context\"](_cv_app.get())\n                environ[\"werkzeug.debug.preserve_context\"](_cv_request.get())\n\n            if error is not None and self.should_ignore_error(error):\n                error = None\n\n            ctx.pop(error)",
      "lineHeight": 1.2
    },
    {
      "id": "NytfEbTiyoPR4yH1puHu7",
      "type": "rectangle",
      "x": 3447.261347559194,
      "y": 2189.2575777432744,
      "width": 695.4544830322261,
      "height": 469.69690322875977,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "seed": 1151916356,
      "version": 85,
      "versionNonce": 1912171900,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false
    },
    {
      "id": "poXzjfseIEtIU9PK_w9tZ",
      "type": "text",
      "x": 3429.1931102545063,
      "y": 2691.037916030628,
      "width": 600,
      "height": 345.59999999999997,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 36586820,
      "version": 43,
      "versionNonce": 1455110212,
      "isDeleted": false,
      "boundElements": [
        {
          "id": "2ov9skNTk86t14vTesdwd",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "    def full_dispatch_request(self) -> Response:\n        if not self._got_first_request:\n            with self._before_request_lock:\n\n                if not self._got_first_request:\n                    for func in self.before_first_request_funcs:\n                        self.ensure_sync(func)()\n\n                    self._got_first_request = True\n\n        try:\n            request_started.send(self)\n            rv = self.preprocess_request()\n            if rv is None:\n                rv = self.dispatch_request()\n        except Exception as e:\n            rv = self.handle_user_exception(e)\n        return self.finalize_request(rv)",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def full_dispatch_request(self) -> Response:\n        if not self._got_first_request:\n            with self._before_request_lock:\n\n                if not self._got_first_request:\n                    for func in self.before_first_request_funcs:\n                        self.ensure_sync(func)()\n\n                    self._got_first_request = True\n\n        try:\n            request_started.send(self)\n            rv = self.preprocess_request()\n            if rv is None:\n                rv = self.dispatch_request()\n        except Exception as e:\n            rv = self.handle_user_exception(e)\n        return self.finalize_request(rv)",
      "lineHeight": 1.2
    },
    {
      "id": "MqoDyWYcP9-rIlsBL4lgl",
      "type": "rectangle",
      "x": 3453.321909692983,
      "y": 2673.3484590909306,
      "width": 690.1514434814449,
      "height": 364.3939399719238,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "seed": 878033988,
      "version": 103,
      "versionNonce": 1877368316,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false
    },
    {
      "id": "2ov9skNTk86t14vTesdwd",
      "type": "arrow",
      "x": 3573.776469019155,
      "y": 2329.408973541004,
      "width": 106.81819915771484,
      "height": 356.0606193542476,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "seed": 1022853572,
      "version": 86,
      "versionNonce": 783519684,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -106.81819915771484,
          50.7575798034668
        ],
        [
          -90.60378594425583,
          356.0606193542476
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": {
        "elementId": "poXzjfseIEtIU9PK_w9tZ",
        "focus": -0.7650866933584256,
        "gap": 5.568323135376204
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "Wq2KsVWASRqhbZFXLdZAO",
      "type": "text",
      "x": 3802.7536342413227,
      "y": 2708.196891631824,
      "width": 144,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1351209212,
      "version": 113,
      "versionNonce": 615839556,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "判断是否第一次请求",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "判断是否第一次请求",
      "lineHeight": 1.2
    },
    {
      "id": "e4KGIcAKJNLBCyQ8UZa-s",
      "type": "text",
      "x": 3839.9885890753076,
      "y": 2732.4771726987187,
      "width": 224,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 999290620,
      "version": 173,
      "versionNonce": 1221119868,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "该方法会阻塞线程直到锁被释放",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "该方法会阻塞线程直到锁被释放",
      "lineHeight": 1.2
    },
    {
      "id": "AB4YncgXkmhPSZMbnEicg",
      "type": "text",
      "x": 3613.6249110967915,
      "y": 2753.15899261449,
      "width": 283.5,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1768471036,
      "version": 96,
      "versionNonce": 981041148,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "执行before_first_request中的函数",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "执行before_first_request中的函数",
      "lineHeight": 1.2
    },
    {
      "id": "ugQZBMbwSPvNwQMRw0b30",
      "type": "text",
      "x": 3802.337031152944,
      "y": 2894.598354186756,
      "width": 128,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1907326844,
      "version": 83,
      "versionNonce": 1675333060,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "发送请求开始信号",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "发送请求开始信号",
      "lineHeight": 1.2
    },
    {
      "id": "q5AmJrJ3GkCQ_kh6G6F8_",
      "type": "text",
      "x": 3427.261347559194,
      "y": 3066.4544332883183,
      "width": 665.625,
      "height": 364.8,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 824578812,
      "version": 53,
      "versionNonce": 62922876,
      "isDeleted": false,
      "boundElements": [
        {
          "id": "Oo8LJ_6eLjcaYJpHgnes-",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "    def preprocess_request(self) -> t.Optional[ft.ResponseReturnValue]:\n\n        names = (None, *reversed(request.blueprints))\n\n        for name in names:\n            if name in self.url_value_preprocessors:\n\n                for url_func in self.url_value_preprocessors[name]:\n                    url_func(request.endpoint, request.view_args)\n\n        for name in names:\n            if name in self.before_request_funcs:\n                for before_func in self.before_request_funcs[name]:\n                    rv = self.ensure_sync(before_func)()\n\n                    if rv is not None:\n                        return rv\n\n        return None",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def preprocess_request(self) -> t.Optional[ft.ResponseReturnValue]:\n\n        names = (None, *reversed(request.blueprints))\n\n        for name in names:\n            if name in self.url_value_preprocessors:\n\n                for url_func in self.url_value_preprocessors[name]:\n                    url_func(request.endpoint, request.view_args)\n\n        for name in names:\n            if name in self.before_request_funcs:\n                for before_func in self.before_request_funcs[name]:\n                    rv = self.ensure_sync(before_func)()\n\n                    if rv is not None:\n                        return rv\n\n        return None",
      "lineHeight": 1.2
    },
    {
      "id": "0BX17X-xMOs-Xh1ZfIgVz",
      "type": "rectangle",
      "x": 3454.0795467169087,
      "y": 3047.5907934567754,
      "width": 684.8484420776363,
      "height": 392.42424011230474,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "seed": 577908292,
      "version": 120,
      "versionNonce": 2080659140,
      "isDeleted": false,
      "boundElements": [
        {
          "id": "Q7B4KxMajVDshIoM0Xnvt",
          "type": "arrow"
        }
      ],
      "updated": 1681144397806,
      "link": null,
      "locked": false
    },
    {
      "id": "jqZrXxOks-wU36BJ0XOtv",
      "type": "text",
      "x": 3650.9355876714985,
      "y": 2825.242313232166,
      "width": 261.5,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 969639620,
      "version": 155,
      "versionNonce": 1658711236,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "改为True，后续再次请求将不再执行",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "改为True，后续再次请求将不再执行",
      "lineHeight": 1.2
    },
    {
      "id": "Oo8LJ_6eLjcaYJpHgnes-",
      "type": "arrow",
      "x": 3540.443262842397,
      "y": 2928.272575225574,
      "width": 72.72727966308594,
      "height": 130.30303955078125,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "seed": 109613052,
      "version": 94,
      "versionNonce": 869740924,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -72.72727966308594,
          36.3636589050293
        ],
        [
          -57.900265073758874,
          130.30303955078125
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": {
        "elementId": "q5AmJrJ3GkCQ_kh6G6F8_",
        "focus": -0.6844490721921147,
        "gap": 7.878818511963118
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "0dum03hOCWyw_K5Lw0_JJ",
      "type": "text",
      "x": 3503.776659754018,
      "y": 3089.333232726795,
      "width": 496,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1611923524,
      "version": 217,
      "versionNonce": 1679688316,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "蓝图可能存在集成关系，因此需要使用逆序，使用正序可能会出现问题",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "蓝图可能存在集成关系，因此需要使用逆序，使用正序可能会出现问题",
      "lineHeight": 1.2
    },
    {
      "id": "62pHN3eWUmnEl7hJBDSFb",
      "type": "text",
      "x": 3901.8826244146626,
      "y": 3128.7271536252324,
      "width": 217.875,
      "height": 38.4,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1976336508,
      "version": 449,
      "versionNonce": 1989571396,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "{蓝图1:[函数1,函数2....],\n 蓝图2:[函数3,函数4....]}",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "{蓝图1:[函数1,函数2....],\n 蓝图2:[函数3,函数4....]}",
      "lineHeight": 1.2
    },
    {
      "id": "7Wo3L7dmIqA_GIp0-0lJC",
      "type": "arrow",
      "x": 3861.6553447515766,
      "y": 3165.01503356908,
      "width": 46.212158203125,
      "height": 10.6060791015625,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "seed": 439392508,
      "version": 29,
      "versionNonce": 463770492,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          46.212158203125,
          -10.6060791015625
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null,
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "ptJBMaWx4V98-V1Q9f_dd",
      "type": "text",
      "x": 3643.359942224721,
      "y": 3184.8256719968144,
      "width": 235,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1587702980,
      "version": 111,
      "versionNonce": 1161610236,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "找到蓝图后，依次执行url_func",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "找到蓝图后，依次执行url_func",
      "lineHeight": 1.2
    },
    {
      "id": "lHKGZPTpeUi5fFYdUOba6",
      "type": "text",
      "x": 3815.2917049200337,
      "y": 3239.2196310422246,
      "width": 239.375,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1263915588,
      "version": 137,
      "versionNonce": 1289652676,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "函数传递endpoint与view_args",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "函数传递endpoint与view_args",
      "lineHeight": 1.2
    },
    {
      "id": "11N__JphJBxAKQYXvWDC9",
      "type": "text",
      "x": 3699.155421045522,
      "y": 3259.105953063709,
      "width": 347.5,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1546028668,
      "version": 176,
      "versionNonce": 1568334972,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "同理依次执行before_request_funcs中的函数",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "同理依次执行before_request_funcs中的函数",
      "lineHeight": 1.2
    },
    {
      "id": "o40SAMWjCn1DWJ851Yw-Z",
      "type": "text",
      "x": 3594.344858911733,
      "y": 3122.855953063709,
      "width": 112,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1641264124,
      "version": 139,
      "versionNonce": 2003874116,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "当前请求的蓝图",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "当前请求的蓝图",
      "lineHeight": 1.2
    },
    {
      "id": "QVwOq1IxF5PYHqz-hebmu",
      "type": "text",
      "x": 3891.7311427862446,
      "y": 3281.4165533444707,
      "width": 201.875,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1278416964,
      "version": 130,
      "versionNonce": 1817307332,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "当前蓝图的beforerequest",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "当前蓝图的beforerequest",
      "lineHeight": 1.2
    },
    {
      "id": "yV4eU3g4gGi97qEMvYwJG",
      "type": "text",
      "x": 3483.246302393178,
      "y": 3236.378673400623,
      "width": 224,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 854543812,
      "version": 254,
      "versionNonce": 790638660,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "解析请求的参数，不会执行函数",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "解析请求的参数，不会执行函数",
      "lineHeight": 1.2
    },
    {
      "id": "tukDh-5Mmovz3UfrhVcCS",
      "type": "text",
      "x": 3481.655421045522,
      "y": 3330.583232726795,
      "width": 281.875,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1122022724,
      "version": 241,
      "versionNonce": 1986848252,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "执行当前蓝图中所有的befroerequest",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "执行当前蓝图中所有的befroerequest",
      "lineHeight": 1.2
    },
    {
      "id": "ogABP-LRNTcEoiJOSquts",
      "type": "text",
      "x": 3480.511462000112,
      "y": 3387.477191772205,
      "width": 415.375,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1788448636,
      "version": 263,
      "versionNonce": 532252612,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "before_request有返回值，则直接返回rv.没有则返回空",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "before_request有返回值，则直接返回rv.没有则返回空",
      "lineHeight": 1.2
    },
    {
      "id": "bLH-HnAApGBI_fhPt67pa",
      "type": "text",
      "x": 3834.3069408209126,
      "y": 2922.325633849842,
      "width": 112,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 251933052,
      "version": 197,
      "versionNonce": 2018952828,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "请求前的返回值",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "请求前的返回值",
      "lineHeight": 1.2
    },
    {
      "id": "zIwx166bbleWMoisj_ULu",
      "type": "text",
      "x": 3674.2311427862446,
      "y": 2944.2953146359746,
      "width": 407,
      "height": 38.4,
      "angle": 0,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1392018172,
      "version": 262,
      "versionNonce": 1916530500,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "如果before_request有返回值，则会跳过\n                        dispatch_request请求",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "如果before_request有返回值，则会跳过\n                        dispatch_request请求",
      "lineHeight": 1.2
    },
    {
      "id": "zueWHIfUjMZK0kKGHUlEk",
      "type": "text",
      "x": 3434.4205806524556,
      "y": 3469.1817701718633,
      "width": 759.375,
      "height": 249.6,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1640926076,
      "version": 41,
      "versionNonce": 1395693308,
      "isDeleted": false,
      "boundElements": [
        {
          "id": "OVA_bWz4P87q9xi3zIgk5",
          "type": "arrow"
        }
      ],
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "text": "    def dispatch_request(self) -> ft.ResponseReturnValue:\n        \n        req = request_ctx.request\n        if req.routing_exception is not None:\n            self.raise_routing_exception(req)\n        rule: Rule = req.url_rule  # type: ignore[assignment]\n        if (\n            getattr(rule, \"provide_automatic_options\", False)\n            and req.method == \"OPTIONS\"\n        ):\n            return self.make_default_options_response()\n        view_args: t.Dict[str, t.Any] = req.view_args  # type: ignore[assignment]\n        return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def dispatch_request(self) -> ft.ResponseReturnValue:\n        \n        req = request_ctx.request\n        if req.routing_exception is not None:\n            self.raise_routing_exception(req)\n        rule: Rule = req.url_rule  # type: ignore[assignment]\n        if (\n            getattr(rule, \"provide_automatic_options\", False)\n            and req.method == \"OPTIONS\"\n        ):\n            return self.make_default_options_response()\n        view_args: t.Dict[str, t.Any] = req.view_args  # type: ignore[assignment]\n        return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)",
      "lineHeight": 1.2
    },
    {
      "id": "xiCUtDpPdEinmz9Uk0b3H",
      "type": "rectangle",
      "x": 3461.871828821401,
      "y": 3458.088600550804,
      "width": 740.1514816284175,
      "height": 285.60597283499555,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "seed": 1413879548,
      "version": 98,
      "versionNonce": 978640452,
      "isDeleted": false,
      "boundElements": [
        {
          "id": "Q7B4KxMajVDshIoM0Xnvt",
          "type": "arrow"
        }
      ],
      "updated": 1681144397806,
      "link": null,
      "locked": false
    },
    {
      "id": "OVA_bWz4P87q9xi3zIgk5",
      "type": "arrow",
      "x": 3569.9887416631977,
      "y": 2966.1514128110234,
      "width": 108.33332061767578,
      "height": 493.1818008422847,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "seed": 1079815036,
      "version": 138,
      "versionNonce": 1132222332,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435473,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -108.33332061767578,
          85.98487854003906
        ],
        [
          -101.7233390224842,
          493.1818008422847
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": {
        "elementId": "zueWHIfUjMZK0kKGHUlEk",
        "focus": -0.9003010514457989,
        "gap": 9.848556518554915
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "80sIpr4x7T0GNT8VtkAW8",
      "type": "text",
      "x": 4525.670389917592,
      "y": 2186.871198501331,
      "width": 796.875,
      "height": 1132.8,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1842355708,
      "version": 28,
      "versionNonce": 45346372,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "class LocalProxy(t.Generic[T]):\n    __slots__ = (\"__wrapped\", \"_get_current_object\")\n\n    _get_current_object: t.Callable[[], T]\n    def __init__(\n        self,\n        local: t.Union[ContextVar[T], Local, LocalStack[T], t.Callable[[], T]],\n        name: t.Optional[str] = None,\n        *,\n        unbound_message: t.Optional[str] = None,\n    ) -> None:\n        if name is None:\n            get_name = _identity\n        else:\n            get_name = attrgetter(name)  # type: ignore[assignment]\n\n        if unbound_message is None:\n            unbound_message = \"object is not bound\"\n\n        if isinstance(local, Local):\n            if name is None:\n                raise TypeError(\"'name' is required when proxying a 'Local' object.\")\n\n            def _get_current_object() -> T:\n                try:\n                    return get_name(local)  # type: ignore[return-value]\n                except AttributeError:\n                    raise RuntimeError(unbound_message) from None\n\n        elif isinstance(local, LocalStack):\n\n            def _get_current_object() -> T:\n                obj = local.top  # type: ignore[union-attr]\n\n                if obj is None:\n                    raise RuntimeError(unbound_message)\n\n                return get_name(obj)\n\n        elif isinstance(local, ContextVar):\n\n            def _get_current_object() -> T:\n                try:\n                    obj = local.get()  # type: ignore[union-attr]\n                except LookupError:\n                    raise RuntimeError(unbound_message) from None\n\n                return get_name(obj)\n\n        elif callable(local):\n\n            def _get_current_object() -> T:\n                return get_name(local())  # type: ignore\n\n        else:\n            raise TypeError(f\"Don't know how to proxy '{type(local)}'.\")\n\n        object.__setattr__(self, \"_LocalProxy__wrapped\", local)\n        object.__setattr__(self, \"_get_current_object\", _get_current_object)",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "class LocalProxy(t.Generic[T]):\n    __slots__ = (\"__wrapped\", \"_get_current_object\")\n\n    _get_current_object: t.Callable[[], T]\n    def __init__(\n        self,\n        local: t.Union[ContextVar[T], Local, LocalStack[T], t.Callable[[], T]],\n        name: t.Optional[str] = None,\n        *,\n        unbound_message: t.Optional[str] = None,\n    ) -> None:\n        if name is None:\n            get_name = _identity\n        else:\n            get_name = attrgetter(name)  # type: ignore[assignment]\n\n        if unbound_message is None:\n            unbound_message = \"object is not bound\"\n\n        if isinstance(local, Local):\n            if name is None:\n                raise TypeError(\"'name' is required when proxying a 'Local' object.\")\n\n            def _get_current_object() -> T:\n                try:\n                    return get_name(local)  # type: ignore[return-value]\n                except AttributeError:\n                    raise RuntimeError(unbound_message) from None\n\n        elif isinstance(local, LocalStack):\n\n            def _get_current_object() -> T:\n                obj = local.top  # type: ignore[union-attr]\n\n                if obj is None:\n                    raise RuntimeError(unbound_message)\n\n                return get_name(obj)\n\n        elif isinstance(local, ContextVar):\n\n            def _get_current_object() -> T:\n                try:\n                    obj = local.get()  # type: ignore[union-attr]\n                except LookupError:\n                    raise RuntimeError(unbound_message) from None\n\n                return get_name(obj)\n\n        elif callable(local):\n\n            def _get_current_object() -> T:\n                return get_name(local())  # type: ignore\n\n        else:\n            raise TypeError(f\"Don't know how to proxy '{type(local)}'.\")\n\n        object.__setattr__(self, \"_LocalProxy__wrapped\", local)\n        object.__setattr__(self, \"_get_current_object\", _get_current_object)",
      "lineHeight": 1.2
    },
    {
      "id": "9Dc6bag3fdO1kNOte44fo",
      "type": "rectangle",
      "x": 4500.054128117462,
      "y": 2159.2802281440727,
      "width": 850.5050659179678,
      "height": 1191.9191996256504,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "seed": 713458684,
      "version": 74,
      "versionNonce": 628885500,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false
    },
    {
      "id": "u10HGZKODqoDRUyvoy103",
      "type": "text",
      "x": 4511.713162483163,
      "y": 1674.2129877469372,
      "width": 684.375,
      "height": 403.2,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 692295292,
      "version": 66,
      "versionNonce": 103122372,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "_no_app_msg = \"\"\"......\"\"\"\n\n_cv_app = ContextVar(\"flask.app_ctx\")\n\n__app_ctx_stack = _FakeStack(\"app\", _cv_app)\n\napp_ctx = LocalProxy(_cv_app, unbound_message=_no_app_msg)\n\ncurrent_app = LocalProxy(_cv_app, \"app\", unbound_message=_no_app_msg)\n\ng = LocalProxy(_cv_app, \"g\", unbound_message=_no_app_msg)\n\n_no_req_msg = \"\"\".......\"\"\"\n_cv_request = ContextVar(\"flask.request_ctx\")\n\n__request_ctx_stack = _FakeStack(\"request\", _cv_request)\n\nrequest_ctx = LocalProxy(_cv_request, unbound_message=_no_req_msg)\n\nrequest = LocalProxy(_cv_request, \"request\", unbound_message=_no_req_msg)\nsession = LocalProxy(_cv_request, \"session\", unbound_message=_no_req_msg)",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "_no_app_msg = \"\"\"......\"\"\"\n\n_cv_app = ContextVar(\"flask.app_ctx\")\n\n__app_ctx_stack = _FakeStack(\"app\", _cv_app)\n\napp_ctx = LocalProxy(_cv_app, unbound_message=_no_app_msg)\n\ncurrent_app = LocalProxy(_cv_app, \"app\", unbound_message=_no_app_msg)\n\ng = LocalProxy(_cv_app, \"g\", unbound_message=_no_app_msg)\n\n_no_req_msg = \"\"\".......\"\"\"\n_cv_request = ContextVar(\"flask.request_ctx\")\n\n__request_ctx_stack = _FakeStack(\"request\", _cv_request)\n\nrequest_ctx = LocalProxy(_cv_request, unbound_message=_no_req_msg)\n\nrequest = LocalProxy(_cv_request, \"request\", unbound_message=_no_req_msg)\nsession = LocalProxy(_cv_request, \"session\", unbound_message=_no_req_msg)",
      "lineHeight": 1.2
    },
    {
      "id": "ls4pJYwPdRYtI1NCPDuQM",
      "type": "rectangle",
      "x": 4500.669325677607,
      "y": 1660.8123122912082,
      "width": 850.5050998263891,
      "height": 435.016784667969,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "seed": 679234684,
      "version": 124,
      "versionNonce": 1719151940,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false
    },
    {
      "id": "9UKHMMWRs8lkRjKecaGV-",
      "type": "text",
      "x": 2070.5349466085995,
      "y": 4256.670703947019,
      "width": 176,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 91528572,
      "version": 127,
      "versionNonce": 2120169724,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "发送应用上下文添加信号",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "发送应用上下文添加信号",
      "lineHeight": 1.2
    },
    {
      "id": "O7QshWAW6QXkbdBzbXeYy",
      "type": "text",
      "x": 1873.4979999940165,
      "y": 4142.057887242373,
      "width": 205.75,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1957578748,
      "version": 128,
      "versionNonce": 1735961668,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "封装了一个ContextVar列表",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "封装了一个ContextVar列表",
      "lineHeight": 1.2
    },
    {
      "id": "yjAHp6tqwuOJOzrDWs3F1",
      "type": "text",
      "x": 1763.060344015284,
      "y": 3792.495619515054,
      "width": 421.875,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 750379460,
      "version": 287,
      "versionNonce": 1955302012,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "_cv_request = ContextVar(\"flask.request_ctx\")",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "_cv_request = ContextVar(\"flask.request_ctx\")",
      "lineHeight": 1.2
    },
    {
      "id": "oAqyq3QAHnZ0uQrxMuWvU",
      "type": "text",
      "x": 2153.093913351222,
      "y": 4236.1319839220605,
      "width": 147.25,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1040080580,
      "version": 61,
      "versionNonce": 1440703172,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "[_cv_app的token]",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "[_cv_app的token]",
      "lineHeight": 1.2
    },
    {
      "id": "Ounxrl12qK1ZsJFXRUruI",
      "type": "text",
      "x": 2180.972738221013,
      "y": 3793.5393800266625,
      "width": 305,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1675355772,
      "version": 226,
      "versionNonce": 72358780,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "（_cv_request的token,app_ctx对象）",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "（_cv_request的token,app_ctx对象）",
      "lineHeight": 1.2
    },
    {
      "id": "eUTnY4YeTnqPb4cKnsnLZ",
      "type": "text",
      "x": 2324.104011278739,
      "y": 3820.6774754585203,
      "width": 144,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 151200252,
      "version": 93,
      "versionNonce": 196116932,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "存了应用上下文对象",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "存了应用上下文对象",
      "lineHeight": 1.2
    },
    {
      "id": "CWOI7AMkDaZFM2TdR_xmZ",
      "type": "text",
      "x": 2249.928935323878,
      "y": 4219.566296530568,
      "width": 142.875,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 954079868,
      "version": 91,
      "versionNonce": 652504188,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "应用上下文的token",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "应用上下文的token",
      "lineHeight": 1.2
    },
    {
      "id": "TZM1VAkHg-Yg7BsYG_jMC",
      "type": "text",
      "x": 3471.583295656066,
      "y": 3487.29115537466,
      "width": 618.75,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1090051012,
      "version": 193,
      "versionNonce": 2034477380,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681142435474,
      "link": null,
      "locked": false,
      "text": "request_ctx = LocalProxy(_cv_request, unbound_message=_no_req_msg)",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "request_ctx = LocalProxy(_cv_request, unbound_message=_no_req_msg)",
      "lineHeight": 1.2
    },
    {
      "id": "Z5JZcQ4Mmz55_9YHACjqd",
      "type": "text",
      "x": 3748.906559157421,
      "y": 3507.966638230572,
      "width": 80,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1308450500,
      "version": 156,
      "versionNonce": 298317436,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144051999,
      "link": null,
      "locked": false,
      "text": "请求上下文",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "请求上下文",
      "lineHeight": 1.2
    },
    {
      "id": "c8wyrbgvf3xNot2xxKMT-",
      "type": "text",
      "x": 3426.448809048914,
      "y": 3765.576120042096,
      "width": 759.375,
      "height": 307.2,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 2147073604,
      "version": 29,
      "versionNonce": 138736964,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144271884,
      "link": null,
      "locked": false,
      "text": "    def finalize_request(\n        self,\n        rv: t.Union[ft.ResponseReturnValue, HTTPException],\n        from_error_handler: bool = False,\n    ) -> Response:\n        response = self.make_response(rv)\n        try:\n            response = self.process_response(response)\n            request_finished.send(self, response=response)\n        except Exception:\n            if not from_error_handler:\n                raise\n            self.logger.exception(\n                \"Request finalizing failed with an error while handling an error\"\n            )\n        return response",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "    def finalize_request(\n        self,\n        rv: t.Union[ft.ResponseReturnValue, HTTPException],\n        from_error_handler: bool = False,\n    ) -> Response:\n        response = self.make_response(rv)\n        try:\n            response = self.process_response(response)\n            request_finished.send(self, response=response)\n        except Exception:\n            if not from_error_handler:\n                raise\n            self.logger.exception(\n                \"Request finalizing failed with an error while handling an error\"\n            )\n        return response",
      "lineHeight": 1.2
    },
    {
      "id": "lJ3sur4NY1IofhPbL-7Xo",
      "type": "rectangle",
      "x": 3457.49264585447,
      "y": 3751.0981232159234,
      "width": 743.4342787000865,
      "height": 330.6397671169707,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "seed": 1644014788,
      "version": 193,
      "versionNonce": 716968388,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144320571,
      "link": null,
      "locked": false
    },
    {
      "id": "PqVQtBMrCYntF2qrwMlTu",
      "type": "text",
      "x": 3554.0246621847655,
      "y": 3723.118336025168,
      "width": 153.375,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1480522436,
      "version": 66,
      "versionNonce": 747857020,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144322742,
      "link": null,
      "locked": false,
      "text": "返回视图函数的结果a",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "返回视图函数的结果a",
      "lineHeight": 1.2
    },
    {
      "id": "49bEEU7vPYf0fiDfuiIGV",
      "type": "text",
      "x": 3717.1223659065536,
      "y": 2978.90955510069,
      "width": 128,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 407463108,
      "version": 335,
      "versionNonce": 725330884,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144367024,
      "link": null,
      "locked": false,
      "text": "返回视图函数结果",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "返回视图函数结果",
      "lineHeight": 1.2
    },
    {
      "id": "Wq1awR9RAz7cmiX09091j",
      "type": "text",
      "x": 3803.384878113585,
      "y": 3017.7984439895786,
      "width": 176,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1090757628,
      "version": 91,
      "versionNonce": 1169476348,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144384496,
      "link": null,
      "locked": false,
      "text": "返回的结果作为参数传入",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "返回的结果作为参数传入",
      "lineHeight": 1.2
    },
    {
      "id": "Q7B4KxMajVDshIoM0Xnvt",
      "type": "arrow",
      "x": 3505.977515917404,
      "y": 3032.579582091792,
      "width": 53.198649088541515,
      "height": 734.006771511501,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": {
        "type": 2
      },
      "seed": 890139332,
      "version": 307,
      "versionNonce": 1672407164,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144406356,
      "link": null,
      "locked": false,
      "points": [
        [
          0,
          0
        ],
        [
          -53.198649088541515,
          201.6835191514756
        ],
        [
          -31.64984809027783,
          734.006771511501
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "0BX17X-xMOs-Xh1ZfIgVz",
        "focus": 0.8783843441477562,
        "gap": 15.01121136498341
      },
      "endBinding": {
        "elementId": "xiCUtDpPdEinmz9Uk0b3H",
        "focus": -0.9693256218545016,
        "gap": 22.891780217493306
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "zLi75M2WW6cbtbCfaU-9c",
      "type": "text",
      "x": 3982.1054456049046,
      "y": 3922.074567036453,
      "width": 128,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1823734140,
      "version": 117,
      "versionNonce": 2014836476,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144449853,
      "link": null,
      "locked": false,
      "text": "发送请求结束信号",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "发送请求结束信号",
      "lineHeight": 1.2
    },
    {
      "id": "icVChvBkATX587YxqnS8Q",
      "type": "text",
      "x": 3943.4184813579436,
      "y": 3900.2563466859747,
      "width": 201.875,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 1503563332,
      "version": 127,
      "versionNonce": 1434715588,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144769692,
      "link": null,
      "locked": false,
      "text": "执行所有的after_request",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "执行所有的after_request",
      "lineHeight": 1.2
    },
    {
      "id": "KR3Z0ZBTx9W_aF1J6BBQ0",
      "type": "text",
      "x": 3952.879778287197,
      "y": 2310.0543711814194,
      "width": 107,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 83409148,
      "version": 73,
      "versionNonce": 35695484,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144791174,
      "link": null,
      "locked": false,
      "text": "得到response",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "得到response",
      "lineHeight": 1.2
    },
    {
      "id": "XoBdoTBa7BailWrCxGhtt",
      "type": "text",
      "x": 3549.4118285259124,
      "y": 2610.5257151755604,
      "width": 80,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 2015205444,
      "version": 73,
      "versionNonce": 1608900036,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144834922,
      "link": null,
      "locked": false,
      "text": "删除上下文",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "删除上下文",
      "lineHeight": 1.2
    },
    {
      "id": "lHBKdVECGEjASNTtFlHrQ",
      "type": "text",
      "x": 1435.202996738801,
      "y": 3057.5290585457897,
      "width": 272,
      "height": 19.2,
      "angle": 0,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "roundness": null,
      "seed": 889938172,
      "version": 182,
      "versionNonce": 2065428220,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1681144950678,
      "link": null,
      "locked": false,
      "text": "创建上下文，指代一个请求上下文对象",
      "fontSize": 16,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "containerId": null,
      "originalText": "创建上下文，指代一个请求上下文对象",
      "lineHeight": 1.2
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}